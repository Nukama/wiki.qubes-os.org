<h1 id="GettingStartedwithQubesOS">Getting Started with Qubes OS</h1>
<p>Note: This guide assumes that you've just installed Qubes for the first time. The installation guide for your Qubes release can be found on the <a href="/wiki/wiki/QubesDownloads">Downloads</a> page.</p>
<p>Now that you've installed Qubes, let's cover some basic concepts.</p>
<h2 id="AppVMsDomainsandTemplateVMs">AppVMs (Domains) and TemplateVMs</h2>
<p>In Qubes, you run all your programs in <strong>domains</strong>. Domains are also called <strong>AppVMs</strong> because they're implemented as lightweight virtual machines (VMs). Not every app runs in its own VM. (That would be a big waste of resources!) Instead, each VM represents a <em>security domain</em> (e.g., &quot;work,&quot; &quot;personal,&quot; &quot;banking,&quot; etc.). Each domain is based, by default, on a single, common <strong>TemplateVM</strong> (but you can create as many as you'd like). This means that when you create a new AppVM, you don't copy the whole root filesystem needed for this AppVM to work (which would include copying all the programs). Instead, each AppVM <em>shares</em> the root filesystem with its respective TemplateVM. An AppVM has read-only access to the filesystem of the Template on which it's based, so an AppVM cannot modify a TemplateVM in any way. This is important, as it means that if an AppVM is ever compromised, the TemplateVM on which it's based (and any other AppVMs based on that TemplateVM) will still be safe. This means that creating a large number of domains is cheap: Each one needs only as much disk space as is necessary to store its private files (e.g., the &quot;home&quot; folder).</p>
<p>If you've installed Qubes using the default options, a few domains have already been created for you:</p>
<ul>
<li>work</li>
<li>personal</li>
<li>untrusted</li>
</ul>
<p>Each domain, apart from having a distinct name, is also assigned a <strong>label</strong>, which is one of several pre-defined colors. The trusted window manager uses these colors in order to draw window decorations (color frames) around the windows of applications running in each domain. These allow you to quickly and easily identify the trust level of a given window at a glance. It's totally up to you how you'd like to interpret these colors. Personally, I find it natural to associate red with that which is untrusted and dangerous (the “red light” -- stop! danger!), green with that which is safe and trusted, and yellow and orange with things in the middle. I've also extended this scheme to include blue and black, which I interpret as indicating progressively more trusted domains than green, with black being ultimately trusted.</p>
<p><a href="/wiki/attachment/wiki/GettingStarted/snapshot12.png"><img src="/wiki/chrome/common/attachment.png" title="No image &quot;snapshot12.png&quot; attached to GettingStarted" alt="No image &quot;snapshot12.png&quot; attached to GettingStarted" /></a></p>
<p>In addition to AppVMs and TemplateVMs, there's one special domain called &quot;dom0,&quot; which is where the Desktop Manager runs. This is where you log in to the system. Dom0 is more trusted than any other domain (including TemplateVMs and black-labeled domains). If dom0 were ever compromised, it would be Game Over<sup>TM</sup>. (The entire system would effectively be compromised.) Due to its overarching importance, dom0 has no network connectivity and is used only for running the Window and Desktop Managers. Dom0 shouldn't be used for anything else. In particular, <a href="/wiki/wiki/SecurityGuidelines#Dom0Precautions">you should never run user applications in dom0</a>. (That's what your AppVMs are for!)</p>
<h2 id="QubesVMManagerandCommandLineTools">Qubes VM Manager and Command Line Tools</h2>
<p>All aspects of the Qubes system can be controlled using command line tools run under a dom0 console. To open a console window in dom0, either go to Start-&gt;System Tools-&gt;Konsole or press Alt-F2 and type <code>konsole</code>.</p>
<p>Various command line tools are described as part of this guide, and the whole reference can be found <a href="/wiki/wiki/DomZeroTools">here</a>.</p>
<p><a href="/wiki/attachment/wiki/GettingStarted/r2b1-dom0-konsole.png"><img src="/wiki/chrome/common/attachment.png" title="No image &quot;r2b1-dom0-konsole.png&quot; attached to GettingStarted" alt="No image &quot;r2b1-dom0-konsole.png&quot; attached to GettingStarted" /></a></p>
<p>Alternatively, you can use a rather intuitive GUI tool called <strong>Qubes VM Manager</strong>. It supports most of the functionality that command line tools provide. The Qubes VM Manager starts and opens automatically when Qubes starts up, but you can also start it by going to Start-&gt;System Tools-&gt;Qubes Manager. Once the Qubes VM Manager is running, you can open the window at any time by clicking on the Qubes tray icon, which typically resides in the bottom-right corner of the screen.</p>
<p><a href="/wiki/attachment/wiki/GettingStarted/r2b1-qubes-manager-2.png"><img src="/wiki/chrome/common/attachment.png" title="No image &quot;r2b1-qubes-manager-2.png&quot; attached to GettingStarted" alt="No image &quot;r2b1-qubes-manager-2.png&quot; attached to GettingStarted" /></a></p>
<h2 id="StartingAppsinDomains">Starting Apps in Domains</h2>
<p>Apps can be started either by using the shortcuts in the Desktop Manager's menu or by using the command line (i.e., a console running in dom0).</p>
<p>You can start apps directly from the start menu. Each domain has its own menu directory under the scheme <strong>Domain: &lt;name&gt;</strong>. After navigating into one of these directories, simply click on the application you'd like to start:</p>
<p><a href="/wiki/attachment/wiki/GettingStarted/r2b1-appsmenu-1.png"><img src="/wiki/chrome/common/attachment.png" title="No image &quot;r2b1-appsmenu-1.png&quot; attached to GettingStarted" alt="No image &quot;r2b1-appsmenu-1.png&quot; attached to GettingStarted" /></a> <a href="/wiki/attachment/wiki/GettingStarted/r2b1-appsmenu-3.png"><img src="/wiki/chrome/common/attachment.png" title="No image &quot;r2b1-appsmenu-3.png&quot; attached to GettingStarted" alt="No image &quot;r2b1-appsmenu-3.png&quot; attached to GettingStarted" /></a></p>
<p>By default, each domain's menu contains only a few shortcuts. If you'd like to add more, simply click <strong>Add more shortcuts...</strong>, select the desired applictions, and click <strong>OK</strong>. You can also add shortcuts manually. (This is sometimes necessary if the desired application doesn't show up in the Qubes VM Manager window.) To do this in KDE, right-click on the <strong>Start</strong> button and click <strong>Menu Editor</strong>. Click the domain directory in which you'd like the menu to appear, click <strong>New Item</strong>, enter its name as <strong>&lt;domain name&gt;: &lt;app name&gt;</strong>, and provide the command for starting the app (see below). Then click <strong>Save</strong> and wait approximately 15 seconds for the changes to propagate to the KDE menu.</p>
<p>To start apps from the console in dom0, type:</p>
<pre class="wiki"><code>qvm-run -a &lt;domain&gt; &quot;&lt;app name&gt; [arguments]&quot;</code></pre>
<p>e.g.:</p>
<pre class="wiki"><code>qvm-run -a red firefox</code></pre>
<h2 id="AddingRemovingandListingDomains">Adding, Removing, and Listing Domains</h2>
<p>Domains can easily be added and removed by clicking on the <strong>Add</strong> and <strong>Remove</strong> buttons in the Qubes VM Manager.</p>
<p>Domains can also be added, removed, and listed from command line (i.e., a console running in dom0) using the following tools:</p>
<ul>
<li><code>qvm-create</code></li>
<li><code>qvm-remove</code></li>
<li><code>qvm-ls</code></li>
</ul>
<h2 id="HowManyDomainsDoINeed">How Many Domains Do I Need?</h2>
<p>That's a great question, but there's no one-size-fits-all answer. It depends on the structure of your digital life, and this is at least a little different for everyone. If you plan on using your system for work, then it also depends on what kind of job you do.</p>
<p>It's a good idea to start out with the three domains created automatically by the installer: work, personal, and untrusted. Then, if and when you start to feel that some activity just doesn't fit into any of your existing domains, you can easily create a new domain for it. You'll also be able to easily copy any files you need to the newly created domain, as explained <a href="/wiki/wiki/CopyingFiles">here</a>.</p>
<p>More paranoid people might find it worthwhile to read <a href="http://theinvisiblethings.blogspot.com/2011/03/partitioning-my-digital-life-into.html">​this article</a>, which describes how one of the Qubes authors partitions her digital life into security domains.</p>
<h2 id="FullScreenDomains">Full Screen Domains</h2>
<p>By default, Qubes doesn't allow any application window to occupy the entire screen such that its window name (which includes the name of the domain to which it belongs) and colored window border are no longer visible. This is a security precaution designed to prevent a situation in which an application which has been allowed to enter full screen mode begins to emulate the entire Qubes system. We want it to be the case that the user is always able to identify which domain is displaying any given window. Otherwise, a compromised domain which is able to occupy the entire screen could trick the user into thinking that she is interacting with a variety of different domains (including dom0), when in fact she is interacting with only a single, compromised domain pretending to be the whole system.</p>
<p>However, if the user makes use of an &quot;expose-like&quot; desktop switcher, such as the &quot;Desktop Grid&quot; effect that is enabled by default under KDE (default activation command: Ctrl-F8), then we can safely allow domains to enter full screen mode, as we have assurance that we can always &quot;preempt&quot; them by hitting the magic key combination (e.g., Ctrl-F8), which will be consumed by the trusted window manager and not passed down to the fullscreen AppVM. This means that the AppVM has no way of effectively &quot;faking&quot; the fullscreen view of the system, as the user can easily identify it as &quot;just another AppVM.&quot; Theoretically, this could be achieved even with primitive Alt-Tab like switching, which should be available on simpler Window Managers (such as Xfce4, which we also support as an alternative dom0 Desktop Environment), but this might be less obvious to the user.</p>
<p>To allow domains to enter full screen mode, one should edit the <code>/etc/qubes/guid.conf</code> file in dom0.</p>
<p>E.g. to allow all domains to enter full screen mode, set <code>allow_fullscreen</code> flag to <code>true</code> in the <code>global</code> section:</p>
<pre class="wiki"><code>global: {
  # default values
  allow_fullscreen = false;
  #allow_utf8_titles = false;
  #secure_copy_sequence = &quot;Ctrl-Shift-c&quot;;
  #secure_paste_sequence = &quot;Ctrl-Shift-v&quot;;
  #windows_count_limit = 500;
};</code></pre>
<p>To allow only select AppVMs to enter full screen mode, create a per-VM section, and set <code>allow_fullscreen</code> flag there to <code>true</code>:</p>
<pre class="wiki"><code>VM: {
  work: {
   allow_fullscreen = true;
  };

};</code></pre>
<p>In order for the changes to take effect, restart the AppVM(s).</p>
<hr />
<p>Now that you're familiar with the basics, feel free to have a look at other <a href="/wiki/wiki/UserDoc">Qubes User Guides</a>.</p>
